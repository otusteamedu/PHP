Домашнее задание #1
Docker, виртуализация и облака

Цель: Научится взаимодействовать с окружением для будущего приложения.

1. Docker
1.1. Установить Docker себе на машину
1.2. С помощью Dockerfile настроить статический сайт (можно использовать nginx образ)

2. Выберите в качестве примера свою текущую компанию (или компанию, в которой хотите работать), коротко опишите ее (количество сотрудников, сфера, приоритеты)
Сравните целесообразность разворачивания своей инфраструктуры или аренды публичного облака (можно выбрать любого провайдера)
Критерии оценки: 1. Docker-контейнер должен содержать только необходимые пакеты
2. Контейнер желательно построить на базе alpine
3. Оценивание стоимости должно происходить не только для Production-инфраструктуры, но и для Stage и Development (если они, конечно, есть в компании)
4. Желательно учесть стоимость поддержки руками DevOps и без него

Выполнение задания представлено в файле index.html

Предполагаемая тема для выполнения финальной проектной работы
Работа магазина с удаленными филиалами

Рабочее место продавца

Реализация товара
Выписывание товарных накладных
Сверка по остаткам
(?) Онлайн-касса
Отчет по реализации

Рабочее место Кладовщика

Приход товара
Отправка товара на торговые точки
Отправка товара по онлайн-покупкам
Списание брака
Инвентаризация

Рабочее место бухгалтера

Установка цен
Выгрузка в 1С/Налогоплательщик для сдачи отчетов
RESTFull, формат обмена с frontend JSON/XML

Экономика

Стоимость локального обслуживание

1.Лицензия 1С:Базовая 3000
2. Сервер Dell Precision 3431 [3431-6909] 78 999

Стоимость облачного решения

1.Cтоимость 1с Облако (2 лицензии - 1 для бухгалтера, 2ая - для автоматического обмена) 1700
2. Стоимость Аренды выделенного сервера (Процессорные ядра (Intel Xeon E5-2680 V3) 2.5 @ 2.9 ГГц -2шт, ОЗУ 4Гб, SSD 40Гб) – 1837
Так как расчетная нагрузка на сервер будет ниже среднего, то в данном сервере можно разместить не только для Production-инфраструктуры, но и Stage и Development.

Необходимость DevOps в обеих случаях считаю нужным, то из расчета можно исключить

Локально – разовая закупка ~ 82000
Облачное решение ~ 3600

Срок окупаемости локального решения ~23 месяца, что считается долгим и ненадежным, то выбор становиться в сторону облачного решения

Docker

Содержание файла Docker

FROM nginx:alpine #Образ
COPY default.conf /etc/nginx/conf.d/default.conf #Копируем конфигурацию
COPY index.html /var/www/html/index.html #Копируем файл статичного сайта
COPY default.css /var/www/html/default.css #копируем стили
EXPOSE 80 #назначаем порт по умолчанию 80
CMD ["nginx", "-g", "daemon off;"] #запускаем nginx в режиме приложения

Создание образа

docker build -t otus/hw1 .

Запуск образа

docker run -d -p 8080:80 otus/hw1
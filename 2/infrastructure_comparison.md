# Cравнение собственной инфраструктуры и облачной

## Разворачивание инфраструктуры

В своей инфраструктуре надо сначала накупить железа, где-то это всё расположить, подготовить помещение для этого хостинга (монтаж, теплоотведение, резервное питание и т.д), и начать накатывать ПО. 

В облачной все трудности с физическим миром лежат на провайдере, а мы только накатываем ПО. И то, вам уже сразу предоставят установленную ОС на выбор.

## Масштабирование

В своей инфраструктуре надо докупать железо, машины, следить за вместимостью и другими характеристиками помещения для хостинга. Грамотно и гибко использовать уже имеющиеся ресурсы (чтобы мощные машины не простаивали вполсилы). С ростом парка железа появится потребность в росте числа обслуживающего этот парк персонала. 

В облачной можно очень быстро, даже автоматизированно на лету добавить мощностей и убрать их, когда они не нужны.

## Геораспределение

Своя инфраструктура скорее всего будет находиться в одном месте.

Облачную можно распределить по разным странам, поближе к клиентам, если есть такая необходимость.

## Отказоустойчивость

В своей инфраструктуре то жёсткий умер, то блок питания сгорел, то свет выключили, а сотрудник всё это меняющий ушёл в отпуск.
 
В облачной можно не задумываться так сильно о физическом мире.

##  Безопасность

Здесь палка о двух концах. С одной стороны ничего страшного что ваша машина висит в облаке, ведь доступ туда есть только у вас, но однако, если у вас есть какая-то очень чувствительная информация и хороший специалист по безопасности и администрированию, плюс паранойя, что всех подслушивают, за всеми подглядывают, то своя инфраструктура тут будет хорошим решением.

## Обслуживание

Для средних и мелких компаний облако может оказаться выгоднее, потому что там вы платите только за виртуалки + админу меньше надо платить т.к. ни с железом ни с сетями, ни с хостерной комнатой не надо возиться. Ну и собственно не требуется доп место для хоста машин, расходов на электроэнергию, резервное питание и т.д.

Однако бывает случай в котором у совсем крошечной компании есть 1 сервер под 1ску и больше ничего ей не надо. В таком случае проще будет купить 1 раз компьютер поставить его под стол в бухгалтерии и работать, раз в год-два меняя в нем БП или жёсткий диск.

## Вывод

В среднем облака мне кажутся выгоднее, однако, если отойти от среднего можно найти случаи где своя инфраструктура окажется дешевле / удобнее / надёжнее. 
Необходимо подбирать инструмент под задачу, универсальной серебряной пули нет.



# Пример
Для примера возьмем начинающую веб-студию.

Представим что у студии есть уже несколько проектов (скажем 5), приносящих деньги.

Допустим что там есть 1 разработчик фуллстэк, который кодит фулл-тайм и второй разработчик, который и кодит, и админит проекты.

Предположим, зарплата админящего специалиста 80 000р в месяц.

## Облачная инфраструктура на [Digital Ocean](https://www.digitalocean.com/pricing/)
В этом случае для 5 проектов  допустим что хватит 4 дроплетов.

3 отдельных , для интернет-магазинов средней руки:

2х  8 GB	4 vCPUs	160 GB	5 TB	$40/month
1х  4 GB    2 vCPUs	80  GB	4 TB	$20/month

и 1 общий для 2 статичных сайтов автошкол:
2 GB	1 vCPU	50 GB	2 TB	$10/month

Чтобы админить парк этих проектов в облаке вполне хватит уделять этому половину времени от общего рабочего.

Т.е. (80 000 / 2) + ((40 * 2) + 20 + 10) * 65 = 47 150р в месяц нужно тратить на обслуживание этих проектов.
из них всего 7 150р в месяц цена инфраструктуры.

## Своя инфраструктура
Необходимо купить также 4 сервера. т.к. интернет-магазины надо изолировать друг от друга и в целях безопасности и в целях готовности к нагрузкам.

Было бы нехорошо, если после очередной рассылки на одном проекте повалит траффик, а другие магазины начнут тормозить из-за соседа.

Согласно прайсам магазина DNS цены на 4 сервера будут примерно (2 * 16000) + 13 000 + 10 000 = 55 000р

Теперь, после покупки парка машин, нам надо где-то разместиться. Если пойти в провайдер, типа Selectel, то 5 машин они разместят тысяч за 15 в месяц.

Если же хостить у себя, то тут два варианта:

1. Хостить где-то у себя под столом, накупив UPS'ок тысяч на 10, и надеяться что дольше чем минут на 10-15 у вас свет не отключится никогда. Завести второй канал интернета. 2 канала будут стоить 1 000р в месяц. Плюс хорошее сетевое оборудование тысяч 3-5. Ну и добавим Возросшие платы за электричество тысячи на 3 в месяц.
2. Сделать всё правильно и оборудовать специальную комнату, купить резервный источник энергии, больше чем 2 интернета, и т.д. тут я даже не решусь считать сколько это будет стоить.

Возьмем вариант 1 как более дешевый (ну и пусть что безответственный).

В нём периодически будет ломаться оборудование и его надо будет мониторить, менять, допустим в год тысяч на 15.
 
Плюс возрастет нагрузка на админа, который помимо того что раскатать и мониторить приложения должен теперь еще обслуживать физическое оборудование, сервера, упски, ругаться с провайдерами, в случае масштабирования быстро бегать в магазин за новыми серверами.

Представим что в лучшем случае он теперь тратит не половину времени на работу, а 3/4.

Значит затраты  на админа + интернет + электричество примерно получатся:

(80 000 / 4) * 3 +  + 1000 + 3000 = 64 000р в месяц + единоразовый платеж 55 000 за сервера + 10 000 UPS'ки + 3 сетевое оборудование

## Вывод
Экономически выгоднее для данной компании пользоваться облачной инфраструктурой.
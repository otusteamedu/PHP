version: '3'

services:
  webapp:
    container_name: webapp
    image: nginx:latest
    networks:
      workernet:
        ipv4_address: 172.28.1.1
    volumes:
      - ./app:/app
      - ./config/nginx.conf:/etc/nginx/conf.d/default.conf
    links:
      - php
  php:
    container_name: php
    image: php:7-fpm
    volumes:
      - ./app:/app
    networks:
      workernet:
        ipv4_address: 172.28.1.2

networks:
  workernet:
    ipam:
      driver: default
      config:
        - subnet: 172.28.0.0/16
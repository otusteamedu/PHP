version: '3'

services:
  server_php:
    build:
      context: ../php7.4-fpm
      dockerfile: Dockerfile
    image: server/php
    container_name: server_php
    volumes:
       - ../code:/var/www/mysite.local
    networks:
      - server-network

  server_nginx:
    build:
      context: ../nginx
      dockerfile: Dockerfile
    image: server/nginx
    container_name: server_nginx
    volumes:
       - ../code:/var/www/mysite.local
    networks:
      - server-network

networks:
  server-network:
    driver: bridge
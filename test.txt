Модульные тесты

    Если длина поля card_number отличается от 16 символов, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_number содержит любые символы, кроме цифр, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_holder содержит более одного пробела, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_holder содержит любые символы, кроме латинских букв и дефиса, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_expiration в значении месяца содержит количество символов, отличное от 2, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_expiration в значении года содержит количество символов, отличное от 2, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_expiration содержит любые символы, кроме цифр, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле card_expiration в значении месяца содержит больше 12 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке
    Если поле card_expiration содержит значение года меньше текущего, то тестируемый метод возвращает код 400 с сообщением об ошибке
    Если поле card_expiration содержит значение года равным текущему и значение месяца меньше текущего, то тестируемый метод возвращает код 400 с сообщением об ошибке
    Если длина поля cvv отличается от 3 символов, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле cvv содержит любые символы, кроме цифр, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если длина поля order_number больше 16 символов, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если поле sum содержит любые символы, кроме цифр и запятой, то тестируемый метод возвращает 400 с сообщением об ошибке
    Если все поля заполнены корректно, то тестируемый метод возвращает код 200

Интеграционные тесты
Проверяем связку «фронт-бэк»

    Если поле card_holder содержит некорректные данные(содержит более одного пробела, содержит любые символы, кроме латинских букв и дефиса), то после получения ответа от бэка на фронте выделяется поле «Владелец карты» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если поле card_number содержит некорректные данные(длина поля отличается от 16 символов, содержит любые символы, кроме цифр), то после получения ответа от бэка на фронте выделяется поле «Номер карты» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если поле card_expiration содержит некорректные данные, то после получения ответа от бэка на фронте выделяется поле «Срок действия карты» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если поле cvv содержит некорректные данные, то после получения ответа от бэка на фронте выделяется поле «CVV код» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если поле order_number содержит некорректные данные, то после получения ответа от бэка на фронте выделяется поле «Номер заказа» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если поле sum содержит некорректные данные, то после получения ответа от бэка на фронте выделяется поле «Сумма» красной рамкой и появляется пояснение ошибки, пришедшей в ответ от бэка;
    Если все поля заполнены корректно, то после получения ответа от бэка на фронте появляется сообщение "Заказ оплачен успешно"

Проверяем связку «бэк-репозиторий»

    Если тестируемый метод вернул код 200, то метод репозитория setOrderIsPaid вернул значение true
    Если тестируемый метод вернул код не равный 200, то метод репозитория setOrderIsPaid не был вызван
    Если заказ с параметрами $orderNumber, $sum уже был оплачен, то тестируемый метод возвращает код 400 с сообщением об ошибке

Проверяем связку «фронт-сервис А»

    Если API-запрос к сервису А вернул HTTP-код 403, то тестируемый метод возвращает код 403 с сообщением об ошибке
    Если API-запрос к сервису А вернул HTTP-код 200, то тестируемый метод возвращает код 200

Системные тесты

    Если cvv неверен, то после получения ответа от бэка на фронте выводится сообщение об ошибке «Не удалось списать данные с карты, проверьте реквизиты».
    Если повторно оплатить заказ с одним номером, то после получения ответа от бэка на фронте выводится сообщение с ошибкой "Заказ уже оплачен".
    Если на карте, которую указали в качестве оплаты, средств меньше чем в поле sum, то после получения ответа от бэка на фронте выводится сообщение с ошибкой "Недостаточно средств"
    Если все поля заполнены корректно, заказ еще не был оплачен и денег на карте достаточно, то после получения ответа от бэка на фронте появляется сообщение "Заказ оплачен успешно"


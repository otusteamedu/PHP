version: "3"

services:
    nginx:
      image: nginx
      ports:
        - 80:80
      volumes:
        - ./default.conf:/etc/nginx/conf.d/default.conf
        - ./www/hw5:/www
        - ./log/access.log:/var/log/nginx/access.log
        - ./log/error.log:/var/log/nginx/error.log


    pgsql:
      image: postgres:12.4
      restart: always
      ports:
        - 5432:5432
      environment:
        POSTGRES_PASSWORD: example
      volumes:
        - ./base:/var/lib/postgresql/data


    php:
      build: .
      ports:
        - 9008:9008
      environment:
        XDEBUG_CONFIG: "remote_host=192.168.88.100 remote_enable=1 remote_autostart=off  remote_port=9008"
      volumes:
        - ./php.ini:/usr/local/etc/php/php.ini
        - ./log/php.log:/usr/local/var/log/php.log
        - ./www/hw5:/www

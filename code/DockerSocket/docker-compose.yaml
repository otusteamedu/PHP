version: "3"

services:
  server:
    build: ./
    volumes:
      - /home/otus/code:/code
      - /tmp/docker:/tmp
    working_dir: /code/console
    entrypoint: ["php", "-f", "server.php"]
  client:
    build: ./
    depends_on:
      - server
    volumes:
      - /home/otus/code:/code
      - /tmp/docker:/tmp
    working_dir: /code/console
    entrypoint: ["php", "-f", "client.php", "quit"]
version: '2.4'

services:
    otus-php-fpm:
        container_name: otus-php-fpm
        image: otus/php-fpm
        build: ./docker/php-fpm
        volumes:
            - ./app:/app
        restart: always
        ports:
            - 80:80
        depends_on:
            - otus-postgres
        networks:
            - otus-network
    otus-postgres:
        container_name: otus-postgres
        image: otus/postgres
        build: ./docker/postgres
        volumes:
            - ./app:/app
            - ./app/var/postgres:/var/lib/postgresql
            - ./app/var/postgres/data:/var/lib/postgresql/data
        restart: always
        ports:
            - 5432:5432
        networks:
            - otus-network
networks:
    otus-network:
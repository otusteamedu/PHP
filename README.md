## 1. Готовим окружение

### 1. Docker

* Создан `Dockerfile` использующий простой docker-образ `nginx:1.18.0-alpine`.
* Создана конфигурация Nginx для статичного сайта: `conf/nginx/conf.d/otus-app.local.conf`
* На хост-машине в `hosts` необходимо добавить строку `127.0.0.1 otus-app.local`
* Для сборки образа использовать команду: `docker build -t otus-app-image .`
* Для запуска контейнера из образа использовать команду: `docker run --name otus-app -d -p 8080:80 otus-app-image`
* Для удобства добавлен bash-скрипт для сборки и запуска контейнера `init.sh`
* После запуска контейнера локальный сайт будет доступен по адресу `http://otus-app.local:8080`

### 2. Виртуальные машины

* Устанавливаем VirtualBox (инструмент для виртуализации ресурсов и использования их как отдельной машины)
* Устанавливаем Vagrant (инструмент для автоматизации установки и настройки гостевой ОС внутри виртуальной машины)
* Устанавливаем Homestead (надстройка над Vagrant, позволяет в удобной форме сконфигурировать виртуальную машину)
* Создан `Homestead.yaml` и размещён в директории где установлен Homestead
* Конфигурация учитывает, что файлы из этой ветки репозитория лежат в каталоге `~/otus/php-2020-10`
* На хост-машине в `hosts` необходимо добавить строку `192.168.10.10 otus-app.homestead`
* Для запуска виртуальной машины в каталоге Homestead использовать команду `vagrant up`
* После запуска виртуальной машины локальный сайт будет доступен по адресу `http://otus-app.homestead`

### 3. Анализ стоимости инфраструктуры

* Компания занимается разработкой мобильных игр: 1 мобильная игра, пол миллиона игроков.
* Приоритеты: широкое территориальное покрытие, доступность, время отклика при большом количестве запросов.
* Учтём необходимость в промежуточных окружениях для разработки и тестирования.
* Не знаю какая именно инфраструктура требуется, поэтому по сути берётся из головы.
* Своя инфраструктура:
  * Требования к серверу:
    * 8 ядерный процессор
    * 64 ГБ оперативной памяти
    * 2 х 1 ТБ SSD
  * Конфигуратор сервера на REG.RU: ~ 10 000 руб/мес
  * Middle DevOps: ~ 150 000 руб/мес
* Инфраструктура в облаке:
  * Яндекс.Облако со схожими требованиями: ~ 20 000 руб/мес
  * Junior DevOps: ~ 70 000 руб/мес
* Вывод:
  * Несмотря на то, что инфраструктура в облаке в месяц обходится дороже чем при аренде выделенного сервера, требования к экспертизе DevOps-специалиста уменьшаются экспоненциально. Что в итоге даёт существенную экономию при меньших трудовых затратах, так как облачный сервис берёт на себя существенную часть работы по разворачиванию, масштабированию и доступности.
###1. Модульные тесты

1.1. Если поле card_number содержит меньше 16 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке

1.2. Если поле card_number содержит больше 16 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке
   
1.3. Если поле card_number содержит любые символы, кроме цифр, то тестируемый метод возвращает код 400 с сообщением об 
ошибке

1.4. Если поле card_holder содержит любые символы, кроме латинских букв в верхнем или нижнем регистре и символа дефис,
то тестируемый метод возвращает код 400 с сообщением об ошибке

1.5. Если поле card_holder содержит больше 1 пробела, то тестируемый метод возвращает код 400 с сообщением об ошибке

1.6. Если поле card_expiration содержит в значении месяца менее 2 символов, то тестируемый метод возвращает код 400 с
сообщением об ошибке

1.7. Если поле card_expiration содержит в значении года менее 2 символов, то тестируемый метод возвращает код 400 с
сообщением об ошибке

1.8. Если поле card_expiration содержит в значении месяца любые символы, кроме цифр, то тестируемый метод возвращает 
код 400 с сообщением об ошибке

1.9. Если поле card_expiration содержит в значении года любые символы, кроме цифр, то тестируемый метод возвращает 
код 400 с сообщением об ошибке

1.10. Если поле card_expiration содержит значение месяца больше 12, то тестируемый метод возвращает код 400 с сообщением 
об ошибке

1.11. Если поле card_expiration содержит значение года больше 50, то тестируемый метод возвращает код 400 с сообщением 
об ошибке

1.12. Если поле card_expiration содержит значение месяца меньше 1, то тестируемый метод возвращает код 400 с сообщением 
об ошибке

1.13. Если поле card_expiration содержит значение года меньше 1, то тестируемый метод возвращает код 400 с сообщением об
ошибке

1.14. Если поле card_expiration содержит значение года меньше текущего, то тестируемый метод возвращает код 400 с
сообщением об ошибке

1.15. Если поле card_expiration содержит значение года равное текущему и значение месяца меньше текущего, то 
тестируемый метод возвращает код 400 с сообщением об ошибке

1.16. Если поле cvv содержит любые символы, кроме цифр, то тестируемый метод возвращает код 400 с сообщением об 
ошибке

1.17. Если поле cvv содержит менее 3 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке

1.18. Если поле cvv содержит более 3 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке

1.19. Если поле order_number содержит более 16 символов, то тестируемый метод возвращает код 400 с сообщением об
ошибке

1.20. Если поле sum содержит любые символы, кроме цифр и запятой, то тестируемый метод возвращает код 400 с сообщением
об ошибке

1.21. Если все поля заполнены корректно, то тестируемый метод возвращает код 200 без сообщения об ошибке

###2. Интеграционные тесты

####2.1. Тестируем связку "бэк - фронт"

2.1.1. Если поле card_number содержит некорректное значение (меньше 16 символов, больше 16 символов, содержит буквы 
или спецсимволы) то после получения ответа от бэка на фронте поле "Номер карты" выделяется красной рамкой и появляется 
надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.2. Если поле card_holder содержит некорректное значение (любые символы, кроме латинских букв в верхнем или нижнем 
регистре и символа дефис, или больше 1 пробела), то после получения ответа от бэка на фронте поле "Владелец карты"
выделяется красной рамкой и появляется надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.3. Если поле card_expiration содержит некорректное значение, то после получения ответа от бэка на фронте поле 
"Срок действия карты" выделяется красной рамкой и появляется надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.4. Если поле cvv содержит некорректное значение, то после получения ответа от бэка на фронте поле "CVV" выделяется
красной рамкой и появляется надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.5. Если поле order_number содержит некорректное значение, то после получения ответа от бэка на фронте поле "Номер
заказа" выделяется красной рамкой и появляется надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.6. Если поле sum содержит некорректное значение, то после получения ответа от бэка на фронте поле "Сумма заказа"
выделяется красной рамкой и появляется надпись с пояснением ошибки, пришедшая в ответе от бэка.

2.1.7. Если все поля заполнены корректно, то после получения ответа от бэка на фронте появляется сообщение об
успешной оплате

####2.2. Тестируем связку "бэк - сервис А"

2.2.1. Если API-запрос к сервису А вернул код 403, то тестируемый метод должен вернуть код 403 с сообщением об 
ошибке

2.2.2. Если API-запрос к сервису А вернул код 200, то тестируемый метод должен вернуть код 200

####2.3. Тестируем связку "бэк - репозиторий"

2.3.1. Если тестируемый метод вернул код, отличный от 200, то метод репозитория setOrderIsPaid не был вызван ни разу

2.3.2. Если тестируемый метод вернул код 200, то был вызван метод репозитория setOrderIsPaid ровно 1 раз
 
2.3.3. Если тестируемый метод вернул код 200, то метод репозитория setOrderIsPaid вернул значение true

2.3.4. Если заказ с номером order_number уже был оплачен, то тестируемый метод должен вернуть код 400 с описанием
ошибки

###3. Системные тесты

3.1. Если cvv неверен, то после получения ответа от бэка на фронте выводится сообщение об ошибке, например "Не 
удалось совершить платеж, проверьте CVV"

3.2. Если на карте, данные которой переданы фронтом, средств меньше, чем в поле sum, то после получения ответа от 
бэка на фронте выводится сообщение о невозможности оплаты, например "Не удалось совершить платеж, недостаточно 
средств"

3.3. Если после успешной оплаты заказа с номером order_number снова инициировать оплату заказа с тем же номером, то
после получения ответа от бэка на фронте выводится сообщение о невозможности оплаты, например "Этот заказ уже был
оплачен"

3.2. Если все поля заполнены валидными данными, то после получения ответа от бэка на фронте выводится сообщение об
успешной оплате

###Дополнительные замечания
Для снижения стоимости тестирования обычно используют тестый платежный шлюз, который допускает ввод реквизитов только
тестовых карт. Обычно даже есть вариации таких карт с различным итогом списания (успешно, недостаточно средств и пр.)
Реальный же платежный шлюз используют только в приёмочном тестировании и как правильно только в продакшне. Однако,
если по каким-то причинам тестовый шлюз использовать невозможно, то рекомендую в первую очередь тестировать негативные
кейсы. Они заведомо не повлекут списаний реальных денежных средств с карты. И только посленим этапом проводить 
тестирование позитивных кейсов. Само собой на небольших суммах. 
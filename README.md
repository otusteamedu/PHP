Кейсы тестирования:

1. Модульные тесты:  
   1.1. Если опущены хотя бы одно из обязательных полей: card_number, card_holder, card_expiration, cvv, order_number, 
   sum, тестируемый метод возвращает 400 с сообщением об ошибке;  
   1.2. Если card_holder не соответствует паттерну: латиница, 1 пробел или дефис, то тестируемый метод возвращает 400 с сообщением об ошибке;  
   1.3. Если card_number не соответствует паттерну: только 16 цифр, то тестируемый метод возвращает код 400 с сообщением об ошибке;
   1.4. Если card_expiration не соответствует формату даты мм/гг, то тестируемый метод возвращает код 400 с сообщением об ошибке;  
   1.5. Если cvv не соответствует паттерну только 3 цифры, то тестируемый метод возвращает код 400 с сообщением об ошибке;  
   1.6. Если длина поля order_number превышает 16 символов, то тестируемый метод возвращает код 400 с сообщением об ошибке;  
   1.7. Если sum не строка и не соответствует паттерну: числа - одна запятая - числа, то тестируемый метод возвращает код 400 с сообщением об ошибке;  
   1.8. Если все данные валидны, то тестируемый метод возвращает код 200 (при этом мокаем сервис А и репозиторий);
   
2. Интеграционные тесты:  
   2.1. Проверяем связку фронт-бэк:   
      - если опущено хотя бы одно обязательное поле, выделяем красным цветом соответствующее поле и выводим сообщение.  
      - если данные хотя бы одного поля невалидны, выделяем красным цветом соответствующее поле и выводим сообщение;  
        
   2.2. Проверяем связку бэк-репозиторий:
      - если сумма заказа не соответствует номеру заказа, тестируемый метод возвращает код 400 с сообщением об ошибке.
      - если заказ не найден в репозитории, тестируемый метод возвращает код 400 с сообщением об ошибке.
      - если все хорошо, то тестируемый метод возвращает код 200 (при этом мокаем сервис А);
    
   2.3. Проверяем связку бек-сервис:
      - если сервис возвращает ошибку 403, то тестируемый метод возвращает код 400 с сообщением об ошибке.
      - если сервис возвращает код 200, то тестируемый метод возвращает код 200 (при этом мокаем репозиторий);
    
3. Системные тесты:   
   3.1. Если недостаточно средств на карте, то на фронте выводим сообщение "Недостаточно средств";  
   3.2. Если переданная сумма заказа не соответствует (по всей видимости форма компрометирована),
   то на фронте выводим сообщение "Ошибка оплаты заказа" и выбрасывается событие отмена оплаты
   (нужно вернуть списанные средства);
   
4. Удешевление тестирования.  
   - Что бы не работать с реальными деньгами, для тестового окружения необходимо подставлять тестовые учетные данные
платежного сервиса.
   - Свести к минимуму обращение к сервису. Мокать его если тесты не направлены на тестирование ответов сервиса.  